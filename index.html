<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Еще одно слово</title>
    <meta name="keywords" content="wordle, unlimited, русский, на русском, слова, игра">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="style.css">
    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (m, e, t, r, i, k, a) {
            m[i] = m[i] || function () {
                (m[i].a = m[i].a || []).push(arguments)
            };
            m[i].l = 1 * new Date();
            // noinspection CommaExpressionJS
            k = e.createElement(t), a = e.getElementsByTagName(t)[0], k.async = 1, k.src = r, a.parentNode.insertBefore(k, a)
        })
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(87246213, "init", {
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true
        });
    </script>
    <noscript>
        <div><img src="https://mc.yandex.ru/watch/87246213" style="position:absolute; left:-9999px;" alt=""/></div>
    </noscript>
    <!-- /Yandex.Metrika counter -->
</head>
<body>
<div id="root">
    <header>
        <button onclick="help()">&#9432;</button>
        <span>Еще одно слово<sup> beta 15</sup></span>
        <button onclick="settings()">&#9881;</button>
    </header>
    <table id="field"></table>
    <table id="keyboard"></table>
    <header id="victory">
        <span>Победа!</span>
        <button onclick="nextGame()">Еще одно слово? &#x23ce;</button>
    </header>
    <header id="defeat">
        <span>Загаданное слово:</span>
        <span id="guessed-word"></span>
        <button onclick="nextGame()">Еще одно слово? &#x23ce;</button>
    </header>
</div>
<div id="help" style="display: none">
    <div style="flex: 1"></div>
    <header>Еще одно слово</header>
    <div>
        <p>Цель игры: угадать слово за 6 или менее попыток.</p>
        <p>После очередной попытки ввода слова его буквы будут раскрашены по следующим правилам:</p>
        <ul>
            <li><span class="misplaced">Желтым</span> &mdash; если эта буква присутствует в загаданном слове;</li>
            <li><span class="correct">Зеленым</span> &mdash; если эта буква присутствует и стоит на верной позиции.</li>
        </ul>
        <p>Используя эти подсказки, попробуйте угадать слово!</p>
    </div>
    <div style="flex: 1"></div>
    <button onclick="window.location.reload()">Играть</button>
    <div style="flex: 1"></div>
</div>
<div id="settings" style="display: none">
    <div style="flex: 1"></div>
    <header>Настройки</header>
    <div>
        <p><label>Длина слова:
            <select id="settings-length" onchange="setWordLen(this.value)">
                <option value="5">5 букв</option>
                <option value="6">6 букв</option>
                <option value="7">7 букв</option>
            </select>
        </label>
        </p>
        <p>
        <div>Сложность:</div>
        <div><label>
            <input type="radio" name="difficulty" value="-1"/>Легко. Можно вводить любую комбинацию букв
        </label></div>
        <div><label>
            <input type="radio" name="difficulty" value="0"/>Норма. Только словарные слова
        </label></div>
        <div><label>
            <input type="radio" name="difficulty" value="1"/>Сложно. Нельзя вводить потенциально неверные
            слова
        </label></div>
    </div>
    <div style="flex: 1"></div>
    <button onclick="window.location.reload()">Играть</button>
    <div style="flex: 1"></div>
</div>
</body>
<script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
<script>
    function getParameterByName(name, url = window.location.href) {
        name = name.replace(/[\[\]]/g, '\\$&');
        var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
            results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    let vkEnable = getParameterByName("vk");
    if (vkEnable) {
        // Sends event to client
        vkBridge.send('VKWebAppInit');
        document.getElementById("root").style.bottom = "50px";//TODO: detect ios
    }
</script>
<script lang="javascript" src="ru.js"></script>
<script lang="javascript" src="game.js"></script>
</html>
